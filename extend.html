<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SPEC Site</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="header" class="header-placeholder"></div>
  <script src="header.js" defer></script>
  <main>
    <div class="content">
      <h1>How to Modify or Extend the SPEC Software</h1>

<p>
  This page explains how someone who has already installed the SPEC
  application can safely make changes or extend the system. It covers what
  languages and tools are used, where dependencies are defined, how features
  are organized, where the backlog and bug list live, style expectations, and
  how to run automated tests.
</p>

<hr>

<h2>1. Making Changes After Installation</h2>

<p>
  After following the installation instructions (cloning the repository,
  creating a virtual environment, and installing dependencies), a developer
  can modify the software by:
</p>

<ol>
  <li>Opening the project folder in their IDE (e.g., VS Code).</li>
  <li>Activating the project virtual environment:
    <pre><code>source venv/bin/activate   # Linux / macOS / WSL
# or
venv\Scripts\activate      # Windows PowerShell / CMD</code></pre>
  </li>
  <li>Identifying the module they want to change:
    <ul>
      <li><code>app/app.py</code> – main application entry point and routing logic.</li>
      <li><code>ml_utils/QualityDetection.py</code> – ML-based blur / quality scoring.</li>
      <li><code>camera_utils/</code> (or equivalent) – camera handling and optimization.</li>
      <li><code>piv_utils/</code> (or equivalent) – PIV processing and FFT operations.</li>
    </ul>
  </li>
  <li>Creating a new Git branch for the change:
    <pre><code>git checkout -b feature/&lt;short-description&gt;</code></pre>
  </li>
  <li>Editing the Python files, saving changes, and running the app:
    <pre><code>python app/app.py</code></pre>
  </li>
</ol>

<p>
  All major behavior (Run PIV, Start Auto PIV, Stop Auto PIV, ML quality
  detection, camera optimization, and sanity checks) is implemented in Python,
  so most modifications will involve updating Python functions and classes.
</p>

<hr>

<h2>2. Languages, Compiler, and Build / Dependency Management</h2>

<ul>
  <li><strong>Primary language:</strong> Python 3 (the project is ~90% Python).</li>
  <li><strong>Supporting languages:</strong> HTML / CSS / JavaScript for the web UI,
      but no separate frontend build system is required.</li>
  <li><strong>Compiler:</strong> Not applicable in the traditional sense; Python is
      interpreted. Native libraries (e.g., NumPy, PyTorch) are installed via wheels.</li>
  <li><strong>Dependency management:</strong> handled with <code>pip</code>
      inside a virtual environment.</li>
</ul>

<p>
  Dependencies are listed in:
</p>
<ul>
  <li><code>requirements.txt</code> (Python packages, including ML and PIV libraries).</li>
  <li><code>setup/set_up_system.sh</code> (shell script that installs system-level
      requirements and then runs <code>pip install -r requirements.txt</code>).</li>
</ul>

<p>
  These files should be updated whenever new Python packages or system tools are
  required by new features.
</p>

<h3>Automated Builds</h3>
<p>
  At present, there are <strong>no fully automated CI builds</strong> configured
  (e.g., GitHub Actions, Jenkins) for this project. Builds and tests are run
  locally by developers inside the project virtual environment. Setting up an
  automated pipeline is a recommended future improvement.
</p>

<hr>

<h2>3. Backlog and Bug Tracking</h2>

<p>
  The project backlog and bug list are tracked using the repository’s online
  issue tracker and project board:
</p>

<ul>
  <li><strong>Backlog:</strong> feature requests, planned enhancements, and technical debt items
      are recorded as issues in the repository (e.g., GitHub Issues) and grouped
      into milestones or a project board by sprint.</li>
  <li><strong>Bug list:</strong> bugs found during development or testing are also filed as issues,
      labeled appropriately (e.g., “bug”, “PIV”, “ML”, “UI”).</li>
</ul>

<h3>Examples of Major Ongoing / Future Issues</h3>
<ul>
  <li><strong>Migration to newer Python versions:</strong> As Python and the OS evolve
      (e.g., Python 3.12 with externally managed environments), the project will
      need periodic updates to ensure all dependencies still install correctly
      inside a virtual environment.</li>
  <li><strong>ML model and library upgrades:</strong> Updating to newer versions of
      PyTorch or other ML frameworks may require retraining or converting
      existing models and adjusting the <code>QualityDetection</code> code.</li>
  <li><strong>Scaling to better hardware resources:</strong> Future deployments
      might move from CPU-only to GPU-enabled systems for faster PIV and ML
      inference, which would require configuration and dependency updates.</li>
</ul>

<p>
  New contributors should always check the issue tracker before starting work to
  avoid duplicating efforts and to see current priorities.
</p>

<hr>

<h2>4. Code Style and Expectations</h2>

<p>
  To keep the codebase consistent and maintainable, developers are expected to
  follow these style guidelines:
</p>

<ul>
  <li><strong>Python style:</strong> follow PEP 8 (standard Python style guide).</li>
  <li><strong>Naming:</strong>
    <ul>
      <li>Modules and files: <code>lowercase_with_underscores.py</code></li>
      <li>Classes: <code>CamelCase</code></li>
      <li>Functions and variables: <code>lower_snake_case</code></li>
    </ul>
  </li>
  <li><strong>Functions:</strong> keep them focused; each function should have a
      clear, single responsibility (e.g., “compute_goodness_metric” rather than
      “do_everything”).</li>
  <li><strong>Docstrings:</strong> add a short docstring to new public functions,
      especially in core modules like <code>QualityDetection</code> and PIV
      utilities, explaining inputs, outputs, and side effects.</li>
  <li><strong>Logging:</strong> use the project’s logging utilities instead of
      <code>print()</code> for runtime messages (for example, when Auto PIV
      loops or when the quality metric fails).</li>
  <li><strong>Comments:</strong> focus on “why” not “what” – the code itself
      should explain what is happening; comments should explain non-obvious
      decisions or domain-specific logic.</li>
</ul>

<p>
  When adding new features, follow the structure and naming used in the existing
  PIV functions, Auto PIV loop, quality detection, camera optimization, and
  sanity check modules.
</p>

<hr>

<h2>5. Automated Testing</h2>

<p>
  The project includes automated tests to help ensure that changes do not break
  existing functionality. Test files are stored under:
</p>

<ul>
  <li><code>tests/</code> – unit tests for core utilities (e.g., PIV math, ML helpers).</li>
  <li><code>tests/test_quality_detection.py</code> (example) – tests for
      QualityDetection model integration and goodness metric calculations.</li>
</ul>

<p>
  Tests are run from the project root with:
</p>

<pre><code>source venv/bin/activate      # activate virtual environment (if not already)
pytest                        # if using pytest
# or
python -m unittest            # if using the standard library test runner
</code></pre>

<p>
  Before submitting changes or opening a merge request, developers should:
</p>

<ol>
  <li>Run the full test suite locally.</li>
  <li>Add new test cases for any new feature, especially changes to:
    <ul>
      <li>Run PIV behavior</li>
      <li>Auto PIV loop logic</li>
      <li>ML quality thresholds / scoring</li>
      <li>Camera optimization or sanity check logic</li>
    </ul>
  </li>
</ol>

<hr>

<h2>Summary</h2>

<ul>
  <li>The project is primarily Python-based and runs inside a virtual
      environment using <code>pip</code>-managed dependencies.</li>
  <li>All major features (Run PIV, Auto PIV, ML quality detection, camera
      optimization, sanity checking) can be extended by editing the Python
      modules under the main app and utility folders.</li>
  <li>Backlog and bugs are tracked in the repository’s issue tracker.</li>
  <li>Developers are expected to follow PEP 8 style, add tests for new code, and
      run automated tests before committing changes.</li>
</ul>

    </div>
  </main>
</body>
</html>
